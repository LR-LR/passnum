1 - CREATE DATABASE centrale_marseille;

2 - USE centrale_marseille; CREATE TABLE ecole (id_ecole int(10) primary key, nom_ecole varchar(30) unique, directeur varchar(30));

3 - INSERT INTO ecole VALUES (1, 'Centrale Marseille', 'Frédéric Fotiadu')

4 - CREATE TABLE service (id_ecole int(10), id_service int(10) primary key, nom_service varchar(30) unique);

5 - INSERT INTO service (id_ecole, id_service, nom_service) VALUES (1,1,'Informatique'),(1,2,'Enseignement'),(1,3,'Scolarité'),(1,4,'Gestion'),(1,5,'Direction'),(1,6,'RH'),(1,7,'Relation Entreprise'),(1,8,'Recherche');

6 - CREATE TABLE batiment (id_ecole int(10), id_batiment int(10) primary key, nom_batiment varchar(30));

7 - INSERT INTO batiment (id_ecole, id_batiment, nom_batiment) VALUES (1,1,'Pythagore'),(1,2,'Euclide'),(1,3,'Archimède'),(1,4,'Copernic'),(1,5,'Galilée'),(1,6,'Kèpler'),(1,7,'Descartes'),(1,8,'Toricelli'),(1,9,'Newton'),(1,10,'Laplace');

8 - CREATE TABLE salle (id_batiment int(10), id_salle int(10) primary key, num_salle varchar(30), capacite_salle int(4), possede_tableau int(1), possede_retro int(1));

9 - LOAD DATA LOCAL INFILE 'salle.txt' INTO TABLE salle COLUMNS TERMINATED BY '\t' IGNORE 1 LINES;

10 - CREATE TABLE promo (id_promo int(10) primary key, id_ecole int(10), id_reponsable int(10), annee int(4), specialite varchar(50));

11 - LOAD DATA LOCAL INFILE 'promo.txt' INTO TABLE promo COLUMNS TERMINATED BY '\t' IGNORE 1 LINES;

12 - CREATE TABLE personnel (id_personnel int(10) primary key, id_responsable int(10), nom varchar(30), prenom varchar(30), id_secu int(20), statut set('Vacataire', 'Interne', 'Prestataire'), num_banque varchar(50), date_entree date, date_sortie date); 

13 - LOAD DATA LOCAL INFILE 'personnel.txt' INTO TABLE personnel COLUMNS TERMINATED BY '\t' IGNORE 1 LINES;

14 - CREATE TABLE etudiant (id_etudiant int(10) primary key, id_promo int(10), nom varchar(30), prenom varchar(30), id_secu int(20), num_banque int(50), age int(2));

15 - LOAD DATA LOCAL INFILE 'etudiant.txt' INTO TABLE etudiant COLUMNS TERMINATED BY '\t' IGNORE 1 LINES;

16 - SELECT COUNT(id_etudiant) FROM etudiant;

17 - SELECT AVG(age) from etudiant;

18 - SELECT nom, prenom, promo.specialite, annee FROM etudiant, promo WHERE promo.annee=2017 && promo.specialite='passnum' && etudiant.id_promo=promo.id_promo;

19 - SELECT COUNT(id_etudiant) FROM etudiant, promo WHERE promo.annee=2017 && etudiant.id_promo=promo.id_promo;

20 - SELECT COUNT(id_etudiant) FROM etudiant, promo WHERE promo.annee=2016 && etudiant.id_promo=promo.id_promo;

21 - SELECT COUNT(id_etudiant) FROM etudiant, promo WHERE promo.annee=2015 && etudiant.id_promo=promo.id_promo;

22 - CREATE TABLE service_has_user (id_personnel int(10), id_service int(10), role varchar(30));

23 - LOAD DATA LOCAL INFILE 'service_user.txt' INTO TABLE service_has_user COLUMNS TERMINATED BY '\t' IGNORE 1 LINES;

24 - SELECT nom, prenom, statut FROM personnel, service, service_has_user WHERE service.id_service=1 && service.id_service=service_has_user.id_service && service_has_user.id_personnel=personnel.id_personnel && nom_service='Informatique';

25 - SELECT COUNT(id_personnel) FROM service_has_user WHERE role LIKE 'Professeur%';

26 - SELECT nom, prenom FROM personnel, service_has_user WHERE service_has_user.role LIKE '%Mathematiques' && service_has_user.id_personnel=personnel.id_personnel;



